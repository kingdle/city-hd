<div class="box">
    <div class="row">
        <div class="col-lg-12">
            <div class="ibox float-e-margins">
                <div class="ibox-title">
                    <h5>行业发展分析</h5>
                    <div class="ibox-tools">
                        <a class="collapse-link">
                            <i class="fa fa-chevron-up"></i>
                        </a>
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                            <i class="fa fa-wrench"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-user">
                            <li><a href="#">Config option 1</a>
                            </li>
                            <li><a href="#">Config option 2</a>
                            </li>
                        </ul>
                        <a class="close-link">
                            <i class="fa fa-times"></i>
                        </a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div id="HeaderDatelineArea" style="min-height: 50px"></div>
                    </div>
                </div>
                <div class="col-lg-8">
                <div class="ibox">
                    <div id="bobal" style="min-height: 690px"></div>
                </div>
                </div>
                <div class="col-lg-4">
                    <div class="ibox float-e-margins">
                        <div class="ibox-title">
                            <h5>增加值总量排名</h5>
                        </div>
                        <div class="row-quota" id="quota">
                            <table class="table table-hover scrolltable">
                                <thead style="display:block;overflow-y: scroll;">
                                <tr>
                                    <th>#</th>
                                    <th>指标名称</th>
                                    <th>总量</th>
                                    <th>增速</th>
                                </tr>
                                </thead>
                                <tbody style="display:block; max-height:592px;overflow-y: scroll;">
                                <tr>
                                    <th scope="row">1</th>
                                    <td>地区生产总值</td>
                                    <td>1463.6</td>
                                    <td>11.9</td>
                                </tr>
                                <tr>
                                    <th scope="row">2</th>
                                    <td>农林牧渔业</td>
                                    <td>34.8</td>
                                    <td>3.5</td>
                                </tr>
                                <tr>
                                    <th scope="row"></th>
                                    <td>农林牧渔服务业</td>
                                    <td>1013.2</td>
                                    <td>11.3</td>
                                </tr>
                                <tr>
                                    <th scope="row">3</th>
                                    <td>工业</td>
                                    <td>653.3</td>
                                    <td>66.1</td>
                                </tr>
                                <tr>
                                    <th scope="row"></th>
                                    <td>金属制品、机械和设备修理业</td>
                                    <td>279.2</td>
                                    <td>11.7</td>
                                </tr>
                                <tr>
                                    <th scope="row">4</th>
                                    <td>建筑业</td>
                                    <td>134.6</td>
                                    <td>11.1</td>
                                </tr>
                                <tr>
                                    <th scope="row">5</th>
                                    <td>批发和零售业</td>
                                    <td>113.4</td>
                                    <td>15.9</td>
                                </tr>
                                <tr>
                                    <th scope="row"></th>
                                    <td>批发业</td>
                                    <td>230.7</td>
                                    <td>21.2</td>
                                </tr>
                                <tr>
                                    <th scope="row"></th>
                                    <td>零售业</td>
                                    <td>156.4</td>
                                    <td>29.5</td>
                                </tr>
                                <tr>
                                    <th scope="row">6</th>
                                    <td>交通运输、仓储和邮政业</td>
                                    <td>74.3</td>
                                    <td>6.9</td>
                                </tr>
                                <tr>
                                    <th scope="row">7</th>
                                    <td>住宿和餐饮业</td>
                                    <td>898.7</td>
                                    <td>46.9</td>
                                </tr>
                                <tr>
                                    <th scope="row"></th>
                                    <td>住宿业</td>
                                    <td>395.8</td>
                                    <td>22.8</td>
                                </tr>
                                <tr>
                                    <th scope="row"></th>
                                    <td>餐饮业</td>
                                    <td>9.1</td>
                                    <td>5</td>
                                </tr>
                                <tr>
                                    <th scope="row">8</th>
                                    <td>居民人均可支配收入</td>
                                    <td>20359</td>
                                    <td>8.8</td>
                                </tr>
                                <tr>
                                    <th scope="row">9</th>
                                    <td>金融业</td>
                                    <td>23256</td>
                                    <td>8.6</td>
                                </tr>
                                <tr>
                                    <th scope="row">10</th>
                                    <td>房地产业</td>
                                    <td>12316</td>
                                    <td>7.7</td>
                                </tr>
                                <tr>
                                    <th scope="row"></th>
                                    <td>房地产业(K门类)</td>
                                    <td>12316</td>
                                    <td>7.7</td>
                                </tr>
                                <tr>
                                    <th scope="row"></th>
                                    <td>自有房地产经营活动</td>
                                    <td>12316</td>
                                    <td>7.7</td>
                                </tr>
                                <tr>
                                    <th scope="row">11</th>
                                    <td>其他服务业</td>
                                    <td>12316</td>
                                    <td>7.7</td>
                                </tr>
                                <tr>
                                    <th scope="row"></th>
                                    <td>营利性服务业</td>
                                    <td>12316</td>
                                    <td>7.7</td>
                                </tr>
                                <tr>
                                    <th scope="row"></th>
                                    <td>非营利性服务业</td>
                                    <td>12316</td>
                                    <td>7.7</td>
                                </tr>
                                <tr>
                                    <th scope="row">12</th>
                                    <td>第一产业</td>
                                    <td>12316</td>
                                    <td>7.7</td>
                                </tr>
                                <tr>
                                    <th scope="row">13</th>
                                    <td>第二产业</td>
                                    <td>12316</td>
                                    <td>7.7</td>
                                </tr>
                                <tr>
                                    <th scope="row">14</th>
                                    <td>第三产业</td>
                                    <td>12316</td>
                                    <td>7.7</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var _width = $('#quota').width();
        $('#quota th:first-child').width(_width * 0.1);
        $('#quota td:first-child').width(_width * 0.1);
        $('#quota th:nth-child(2)').width(_width * 0.4);
        $('#quota td:nth-child(2)').width(_width * 0.4);
        $('#quota th:nth-child(3)').width(_width * 0.2);
        $('#quota td:nth-child(3)').width(_width * 0.2);
        $('#quota th:nth-child(4)').width(_width * 0.2);
        $('#quota td:nth-child(4)').width(_width * 0.2);
        $('#quota th:nth-child(5)').width(_width * 0.1);
        $('#quota td:nth-child(5)').width(_width * 0.1);
    })
</script>
<script type="text/javascript">
    $(function () {
        storeB = new SyStore({
            autoLoad: true,
            datasetId: 4,
            success: function (store) {
                initTimelineArea();
                //==============散点图(横轴指标)=================
                var axisArr = [];
                for (var axis in store.meta.item) {
                    axisArr.push({
                        name: store.meta.item[axis].name,
                        arr: [{
                            type: 'item',
                            extField: store.meta.item[axis].extField
                        }]
                    })

                }
                //==============!散点图(横轴指标)=================
                for (var j in dateArr) {
                    var baseRes = {
                        frame: 200000011,
                        area: 1508,
                        time_year: dateArr[j].getFullYear(),
                        time_month: dateArr[j].getMonth() + 1,
                    }

                    var baseRes1 = {
                        frame: 200000014,
                        area: 1508,
                        time_year: dateArr[j].getFullYear(),
                        time_month: dateArr[j].getMonth() + 1,
                    }
                    var kit = new SyValueKit(baseRes, store); //总量kit
                    var kit1 = new SyValueKit(baseRes1, store); //增速kit
                    //===============散点图kit==============
                    var sandianKit = new SyChartSeriesKit({
                        store: store,
                        series: [{
                            type: "time_year",
                            extField: dateArr[j].getFullYear()
                        }, {
                            type: 'time_month',
                            extField: dateArr[j].getMonth() + 1
                        }, {
                            type: 'area',
                            extField: 1508
                        }],
                        axis: axisArr,
                        dim: [
                            [{
                                type: 'frame',
                                extField: store.findMetaByItemName({
                                    type: 'frame',
                                    name: '累计'
                                }).extField
                            }],
                            [{
                                type: 'frame',
                                extField: store.findMetaByItemName({
                                    type: 'frame',
                                    name: '增长'
                                }).extField
                            }]
                        ]

                    });
                }
                var sd = sandianKit.genSeriesData();
                console.log(sd)
                console.log(sd[0])
                // 基于准备好的dom，初始化echarts实例
                var myChart = echarts.init(document.getElementById('bobal'));

                // 指定图表的配置项和数据
                var
                    option = {
                        title: {
                            left: 'center',
                            text: '黄岛区地区生产总值完成情况'
                        },
                        grid: [
                            {x: '4%', y: '10%', width: '85%', height: '80%'},
//                            {x2: '4%', y: '10%', width: '36%', height: '80%'}
                        ],
                        tooltip: {
                            trigger: 'axis',
                            showDelay: 0,
                            formatter: function (p) {
                                console.log(arguments);
                                var pp = p[0];
                                return pp.seriesName + '<br>总量:' + pp.data[0] + "<br>增速:" + pp.data[1];
                            },
                            axisPointer: {
                                show: true,
                                type: 'cross',
                                lineStyle: {
                                    type: 'dashed',
                                    width: 1
                                }
                            },
                            zlevel: 1
                        },
                        xAxis: [
                            {
                                gridIndex: 0,
                                type: 'value',
                                scale: true,
                                name: '累计(亿元)'
                            },
//                            {
//                                gridIndex: 1,
//                                type: 'value',
//                                scale: true,
//                                name: ''
//                            }
                        ],
                        yAxis: [
                            {
                                gridIndex: 0,
                                type: 'value',
                                scale: true,
                                name: '增速(%)'
                            },
//                            {
//                                gridIndex: 1,
//                                type: 'value',
//                                scale: true,
//                                name: '增速(%)'
//                            }
                        ],
                        series: [
                            {
                                name: '农林牧渔业',
                                type: 'scatter',
                                large: true,
                                data: [sd[7]],
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '工业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[9]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '建筑业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[2]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '批发和零售业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[11]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '交通运输、仓储和邮政业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[14]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '住宿和餐饮业',
                                type: 'scatter',
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                large: true,
                                data: [sd[15]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '金融业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[17]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '房地产业',
                                type: 'scatter',
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                large: true,
                                data: [sd[5]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '其他服务业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[19]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '农林牧渔业服务业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[8]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '金属制品、机械和设备修理业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[10]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '批发业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[12]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '零售业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[13]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '住宿业',
                                type: 'scatter',
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                large: true,
                                data: [sd[16]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '餐饮业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[3]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '房地产业(K门类)',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[4]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '自有房地产经营活动',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[18]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '营利性服务业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[20]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            },
                            {
                                name: '非营利性服务业',
                                type: 'scatter',
                                large: true,
                                xAxisIndex: 0,
                                yAxisIndex: 0,
                                data: [sd[21]],
                                label: {
                                    normal: {
                                        show: true,
                                        formatter: '{a}',
                                        position: 'top'

                                    }
                                }
                            }

                        ]
                    };

                // 使用刚指定的配置项和数据显示图表。
                myChart.setOption(option);
                window.onresize = function () {
                    myChart.resize();
                };
            }
            })
    });
</script>